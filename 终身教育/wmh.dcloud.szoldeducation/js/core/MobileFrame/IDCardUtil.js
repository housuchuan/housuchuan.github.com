define(function(require,c,e){var b=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2,1];var a=[1,0,10,9,8,7,6,5,4,3,2];c.IdCardUtil_18=(function(){var h={};h.isValidityBrithBy18IdCard=function(j){var l=j.substring(6,10);var m=j.substring(10,12);var i=j.substring(12,14);var k=new Date(l,parseFloat(m)-1,parseFloat(i));if(k.getFullYear()!=parseFloat(l)||k.getMonth()!=parseFloat(m)-1||k.getDate()!=parseFloat(i)){return false}else{return true}};h.isTrueValidateCodeBy18IdCard=function(k){var m=0;if(k[17].toLowerCase()=="x"){k[17]=10}for(var l=0;l<17;l++){m+=b[l]*k[l]}var j=m%11;if(k[17]==a[j]){return true}else{return false}};h.GetIdCardBirthday18=function(j){var k=j.substring(6,10);var l=j.substring(10,12);var i=j.substring(12,14);return k+"-"+l+"-"+i};return h}());c.IdCardUtil_15=(function(){var h={};h.isValidityBrithBy15IdCard=function(l){var k=l.substring(6,8);var m=l.substring(8,10);var i=l.substring(10,12);var j=new Date(k,parseFloat(m)-1,parseFloat(i));if(j.getYear()!=parseFloat(k)||j.getMonth()!=parseFloat(m)-1||j.getDate()!=parseFloat(i)){return false}else{return true}};h.GetIdCardBirthday15=function(k){var j=k.substring(6,8);var l=k.substring(8,10);var i=k.substring(10,12);return j+"-"+l+"-"+i};return h}());function f(h){h=h.replace(/ /g,"").trim();if(h.length==15){return c.IdCardUtil_15.isValidityBrithBy15IdCard(h)}else{if(h.length==18){var i=h.split("");if(c.IdCardUtil_18.isValidityBrithBy18IdCard(h)&&c.IdCardUtil_18.isTrueValidateCodeBy18IdCard(i)){return true}else{return false}}else{return false}}}function g(h){h=h.replace(/ /g,"").trim();if(h.length==15){return c.IdCardUtil_15.GetIdCardBirthday15(h)}else{if(h.length==18){return c.IdCardUtil_18.GetIdCardBirthday18(h)}else{return""}}}c.validateUserIdendity=function(h,i){if(!h||typeof(h)!="string"||(i!=true&&h.trim().length!=18)){console.log("校验失败");return false}return f(h)};c.getUserBirthDayByIdendity=function(h,i){if(c.validateUserIdendity(h,i)==false){return"Illegal IdCard"}return g(h)}});