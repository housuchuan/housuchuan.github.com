define(function(require,h,d){var l=Object.prototype.toString;var i=/([YMDhmsiWw])(\1*)/g;var b="YYYY-MM-DD hh:mm:ss:iii";function m(n){return l.call(n)==="[object Date]"}function c(s,o){var w=(m(s))?s.getTime():undefined;var n=new Date(w);var t=n.getFullYear(),r=n.getMonth(),p=n.getDate(),u=n.getHours(),q=n.getMinutes(),v=n.getSeconds();(!!o)&&o(n,t,r,p,u,q,v);return n}function a(r,t){try{var o=(t||(r.length===10?"YYYY-MM-DD":(r.length===19?"YYYY-MM-DD hh:mm:ss":"YYYY-MM-DD hh:mm:ss:iii"))).match(i);var n=r.match(/(\d)+/g);if(o.length>0){var q=new Date(1970,0,1);for(var p=0;p<o.length;p++){var s=parseInt(n[p],10);switch(o[p].charAt(0)||""){case"Y":q.setFullYear(s);break;case"M":q.setMonth(s-1);break;case"D":q.setDate(s);break;case"h":q.setHours(s);break;case"m":q.setMinutes(s);break;case"s":q.setSeconds(s);break;case"i":q.setMilliseconds(s);break;default:}}return q}}catch(u){}return null}function f(p,n){var n=n-(p+"").length;for(var o=0;o<n;o++){p="0"+p}return p}function j(o,n){if(!m(o)){return""}try{n=n||b;return n.replace(i,function(q){switch(q.charAt(0)){case"Y":return f(o.getFullYear(),q.length);case"M":return f(o.getMonth()+1,q.length);case"D":return f(o.getDate(),q.length);case"h":return f(o.getHours(),q.length);case"m":return f(o.getMinutes(),q.length);case"s":return f(o.getSeconds(),q.length);case"i":return f(o.getMilliseconds(),q.length);case"w":return o.getDay();case"W":var r=["日","一","二","三","四","五","六"];return f(r[o.getDay()],q.length);default:return""}})}catch(p){console.log("error:"+p);return""}}function g(n){var o=new Date(n.getTime());o.setMonth(o.getMonth()+1);o.setDate(0);return o.getDate()}function k(){var o=arguments[0];var n=arguments[1];if(typeof o==="number"&&isFinite(value)){this.myDate=new Date(o)}else{if(m(o)){this.myDate=new Date(o.getTime())}else{if(typeof o==="string"){if(typeof n!=="string"&&typeof n!=="undefined"){n=undefined}this.myDate=a(o,n)}else{if(arguments.length==0){this.myDate=new Date()}else{throw"MyDate Constructor Error!"}}}}}k.prototype={plusYear:function(n){return new k(c(this.myDate,function(s,r,t,p,o,q,u){s.setFullYear(r+n)}))},plusMonth:function(n){return new k(c(this.myDate,function(s,r,t,p,o,q,u){s.setMonth(t+n)}))},plusDate:function(n){return new k(c(this.myDate,function(s,r,t,p,o,q,u){s.setDate(p+n)}))},plusHours:function(n){return new k(c(this.myDate,function(s,r,t,p,o,q,u){s.setHours(o+n)}))},plusMinutes:function(n){return new k(c(this.myDate,function(s,r,t,p,o,q,u){s.setMinutes(q+n)}))},plusSeconds:function(n){return new k(c(this.myDate,function(s,r,t,p,o,q,u){s.setSeconds(u+n)}))},minusYear:function(n){return this.plusYears(-n)},minusMonth:function(n){return this.plusMonths(-n)},minusDate:function(n){return this.plusDate(-n)},minusHours:function(n){return this.plusHours(-n)},minusMinutes:function(n){return this.plusMinutes(-n)},minusSeconds:function(n){return this.plusSeconds(-n)},getMonthDays:function(n){switch(n){case 1:case 3:case 5:case 7:case 8:case 10:case 12:return 31;break;case 4:case 6:case 9:case 11:return 30;break;case 2:if(this.isLeapYear()){return 29}else{return 28}break;default:return 0;break}},setYear:function(n){this.myDate.setFullYear(n)},setMonth:function(n){this.myDate.setMonth(n-1)},setDate:function(n){this.myDate.setDate(n)},setHours:function(n){this.myDate.setHours(n)},setMinutes:function(n){this.myDate.setMinutes(n)},setSeconds:function(n){this.myDate.setSeconds(n)},setMilliseconds:function(n){this.myDate.setMilliseconds(n)},getYear:function(){return this.myDate.getFullYear()},getMonth:function(){return this.myDate.getMonth()},getDate:function(){return this.myDate.getDate()},getHours:function(){return this.myDate.getHours()},getMinutes:function(){return this.myDate.getMinutes()},getSeconds:function(){return this.myDate.getSeconds()},getMilliseconds:function(){return this.myDate.getMilliseconds()},getAbsoluteYear:function(){return this.myDate.getFullYear()-1970},getAbsoluteMonth:function(){return this.getAbsoluteYear()*12+this.myDate.getMonth()},getAbsoluteDate:function(){var n=this.getAbsoluteMillonsTime();return parseInt(n/1000/60/60/24,10)},getAbsoluteHours:function(){return this.getAbsoluteDate()*24+this.myDate.getHours()},getAbsoluteMinutes:function(){return this.getAbsoluteHours()*60+this.myDate.getMinutes()},getAbsoluteSeconds:function(){return this.getAbsoluteMinutes()*60+this.myDate.getSeconds()},getAbsoluteMillonsTime:function(){return this.myDate.getTime()},getDayOfWeek:function(n){return this.myDate.getDay()},isLeapYear:function(){return(0==this.myDate.getYear()%4&&((this.myDate.getYear()%100!=0)||(this.myDate.getYear()%400==0)))},toDate:function(){return c(this.myDate)},clone:function(){return new k(c(this.myDate))},getBegin:function(n){return new k(c(this.myDate,function(s,r,t,p,o,q,u){switch(n){case"YYYY":s.setMonth(0);s.setDate(1);s.setHours(0);s.setMinutes(0);s.setSeconds(0);s.setMilliseconds(0);break;case"MM":s.setDate(1);s.setHours(0);s.setMinutes(0);s.setSeconds(0);s.setMilliseconds(0);case"DD":s.setHours(0);s.setMinutes(0);s.setSeconds(0);s.setMilliseconds(0);break;case"hh":s.setMinutes(0);s.setSeconds(0);s.setMilliseconds(0);break;case"mm":s.setSeconds(0);s.setMilliseconds(0);break;case"ss":s.setMilliseconds(0);break;default:}}))},getEnd:function(n){return new k(c(this.myDate,function(s,r,t,p,o,q,u){switch(n){case"YYYY":s.setMonth(11);s.setDate(31);s.setHours(23);s.setMinutes(59);s.setSeconds(59);s.setMilliseconds(999);break;case"MM":s.setDate(g(s));s.setHours(23);s.setMinutes(59);s.setSeconds(59);s.setMilliseconds(999);case"DD":s.setHours(23);s.setMinutes(59);s.setSeconds(59);s.setMilliseconds(999);break;case"hh":s.setMinutes(59);s.setSeconds(59);s.setMilliseconds(999);break;case"mm":s.setSeconds(59);s.setMilliseconds(999);break;case"ss":s.setMilliseconds(999);break;default:}}))},compare:function(n,o){if(!m(n)&&!(n instanceof k)){return -1}o=o||"iii";if(o==="YYYY"){if(this.getAbsoluteYear()==n.getAbsoluteYear()){return 0}else{if(this.getAbsoluteYear()>n.getAbsoluteYear()){return 1}else{return 2}}}else{if(o==="MM"){if(this.getAbsoluteMonth()==n.getAbsoluteMonth()){return 0}else{if(this.getAbsoluteMonth()>n.getAbsoluteMonth()){return 1}else{return 2}}}else{if(o==="DD"){if(this.getAbsoluteDate()==n.getAbsoluteDate()){return 0}else{if(this.getAbsoluteDate()>n.getAbsoluteDate()){return 1}else{return 2}}}else{if(o==="hh"){if(this.getAbsoluteHours()==n.getAbsoluteHours()){return 0}else{if(this.getAbsoluteHours()>n.getAbsoluteHours()){return 1}else{return 2}}}else{if(o==="mm"){if(this.getAbsoluteMinutes()==n.getAbsoluteMinutes()){return 0}else{if(this.getAbsoluteMinutes()>n.getAbsoluteMinutes()){return 1}else{return 2}}}else{if(o==="ss"){if(this.getAbsoluteSeconds()==n.getAbsoluteSeconds()){return 0}else{if(this.getAbsoluteSeconds()>n.getAbsoluteSeconds()){return 1}else{return 2}}}else{if(this.getAbsoluteMillonsTime()==n.getAbsoluteMillonsTime()){return 0}else{if(this.getAbsoluteMillonsTime()>n.getAbsoluteMillonsTime()){return 1}else{return 2}}}}}}}}},isMoreThan:function(n,o){return this.compare(n,o)==1?true:false},isLessThan:function(n,o){return this.compare(n,o)==2?true:false},isEqual:function(n,o){return this.compare(n,o)==0?true:false},toString:function(n){return j(this.myDate,n)}};h.MyDate=k});