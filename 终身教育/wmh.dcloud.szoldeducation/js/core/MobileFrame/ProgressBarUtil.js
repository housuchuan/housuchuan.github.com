define(function(require,e,a){var f=require("core/MobileFrame/CommonUtil");var j=require("core/MobileFrame/HtmlUtil");var d={isShowProgressText:true};var b='<div class="mobileFrame-progressBar"><div class=" mobileFrame-progressBuffer"><div class="mobileFrame-progress"><span>0%</span></div></div></div>';function i(n){if(typeof(n)=="string"){n=document.querySelector(n)}if(!(n instanceof HTMLElement)){this.isCanUse=false;return}if(!f.IsInclude("MobileFrame.css")){console.error("错误:没有框架css文件,无法使用进度条");this.isCanUse=false;return}this.isCanUse=true;this.targetElem=n;n.appendChild(j.pareseStringToHtml(b));this.targetElem.querySelector(".mobileFrame-progressBuffer").style.width="0";var o=g(this.targetElem);h(this.targetElem,o);this.setOptions()}function h(q,r){q.querySelector(".mobileFrame-progressBar").style.height=r;q.querySelector(".mobileFrame-progressBuffer").style.height=r;var p=parseInt(r)/6;var o=2;if(parseInt(r)>=20){o=3}if(parseInt(r)>=60){o=4}if(parseInt(r)>=100){o=6}var n=parseInt(r)/o;q.querySelector(".mobileFrame-progress").style.height=parseInt(r)-p+"px";q.querySelector(".mobileFrame-progress").style.top=p/2+"px";q.querySelector(".mobileFrame-progress").style["line-height"]=parseInt(r)-p+"px";q.querySelector(".mobileFrame-progress").style["border-radius"]=n+"px"}function k(n){if(n&&n.indexOf("%")!=-1){n=parseFloat(n)/100*document.body.scrollWidth}else{n=parseFloat(n)+"px"}return n}function m(o,p){var n="0px";if((!o instanceof HTMLElement)||!p){return n}if(!o[p]){if(o.parentElement&&o.parentElement[p]){n=o.parentElement[p]+"px"}else{if(p=="offsetHeight"){n="20px"}else{n="100%"}}}else{n=o[p]+"px"}if(p=="height"&&n.indexOf("%")!=-1){n="20px"}return n}function l(n){return m(n,"offsetWidth")}function g(n){return m(n,"offsetHeight")}i.prototype.setProgress=function(o){if(!this.isCanUse){return}var n=parseFloat(k(l(this.targetElem)))*o/100;this.targetElem.querySelector(".mobileFrame-progress").style.width=n+"px";if(d.isShowProgressText==true){this.targetElem.querySelector(".mobileFrame-progress >span").innerText=o.toFixed(1)+"%"}};i.prototype.setBufferProgress=function(o){if(!this.isCanUse){return}var n=parseFloat(k(l(this.targetElem)))*o/100;this.targetElem.querySelector(".mobileFrame-progressBuffer").style.width=n+"px"};i.prototype.setProgressBarBg=function(o){if(!this.isCanUse){return}var n=this.targetElem.querySelector(".mobileFrame-progressBar");if(o=="default"){n.className="mobileFrame-progressBar "}else{if(o=="lightGreen"){n.className="mobileFrame-progressBar mobileFrame-BgLightGreen"}else{if(o=="gray"){n.className="mobileFrame-progressBar mobileFrame-BgGray"}else{if(o=="lightBlue"){n.className="mobileFrame-progressBar mobileFrame-BgLightBlue"}else{if(o=="lightRed"){n.className="mobileFrame-progressBar mobileFrame-BgLightRed"}else{if(o=="black"){n.className="mobileFrame-progressBar mobileFrame-BgBlack"}}}}}}};i.prototype.setBufferBg=function(n){if(!this.isCanUse){return}var o=this.targetElem.querySelector(".mobileFrame-progressBuffer");if(n=="default"){o.className="mobileFrame-progressBuffer "}else{if(n=="green"){o.className="mobileFrame-progressBuffer mobileFrame-bufferGreen"}else{if(n=="orange"){o.className="mobileFrame-progressBuffer mobileFrame-bufferOrange"}else{if(n=="blue"){o.className="mobileFrame-progressBuffer mobileFrame-bufferBlue"}else{if(n=="red"){o.className="mobileFrame-progressBuffer mobileFrame-bufferRed"}else{if(n=="black"){o.className="mobileFrame-progressBuffer mobileFrame-bufferBlack"}else{if(n=="skyBlue"){o.className="mobileFrame-progressBuffer mobileFrame-bufferSkyBlue"}}}}}}}};i.prototype.setProgressBg=function(n){if(!this.isCanUse){return}var o=this.targetElem.querySelector(".mobileFrame-progress");if(n=="default"){o.className="mobileFrame-progress "}else{if(n=="green"){o.className="mobileFrame-progress mobileFrame-progressGreen"}else{if(n=="orange"){o.className="mobileFrame-progress mobileFrame-progressOrange"}else{if(n=="blue"){o.className="mobileFrame-progress mobileFrame-progressBlue"}else{if(n=="red"){o.className="mobileFrame-progress mobileFrame-progressRed"}}}}}};i.prototype.setOptions=function(n){if(n){for(var o in d){if(n[o]!==undefined){d[o]=n[o]}}}if(!this.isCanUse){return}if(d.isShowProgressText==false){this.targetElem.querySelector(".mobileFrame-progress >span").innerText=""}};e.createProgressBarTypeVideo=function(o){var n=new i(o);return n}});