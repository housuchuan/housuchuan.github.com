define(function(require,a,e){var c=require("core/MobileFrame/CommonUtil");var b=require("core/MobileFrame/HtmlUtil");(function(f){f.addGalleryLandscape=function(n,g,q,s){if(g==null||!Array.isArray(g)||g.length<0){console.error("错误:JSON数据格式不对!");return}if(n!=null){if(n instanceof HTMLElement){}else{if(typeof(n)=="string"){n=b.$domByStr(n);if(n==null){console.error("错误:不存在该元素选择器!");return}}}}else{console.error("错误:元素选择器为空!");return}s=s||{};s.isShowIndicator=(s.isShowIndicator!=null&&typeof(s.isShowIndicator)==="boolean")?s.isShowIndicator:true;s.isShowPageIndicator=(s.isShowPageIndicator!=null&&typeof(s.isShowPageIndicator)==="boolean")?s.isShowPageIndicator:false;s.perLineItem=(s.perLineItem!=null&&typeof(s.perLineItem)=="number"&&s.perLineItem>0)?s.perLineItem:2;s.perLineItem=s.perLineItem%5;s.maxImgHeight=(s.maxImgHeight!=null&&typeof(s.maxImgHeight)=="string")?s.maxImgHeight:"100%";s.minImgHeight=(s.minImgHeight!=null&&typeof(s.minImgHeight)=="string")?s.minImgHeight:null;s.isLoop=(s.isLoop!=null&&typeof(s.isLoop)=="boolean")?s.isLoop:true;s.isAuto=(s.isAuto!=null&&typeof(s.isAuto)=="boolean")?s.isAuto:false;s.autoTime=(s.autoTime!=null&&typeof(s.autoTime)=="number"&&s.autoTime>=0)?s.autoTime:3000;var h=g.length;var o="";o+='<div class="mui-slider">';if(s.isLoop){o+='<div class="mui-slider-group mui-slider-loop">'}else{o+='<div class="mui-slider-group">'}var p=function(x,t){var u="";if(t){u+='<div class="mui-slider-item mui-slider-item-duplicate" >'}else{u+='<div class="mui-slider-item">'}var w=x.id?("id="+x.id):"";var v=s.maxImgHeight?("max-height:"+s.maxImgHeight+";"):"";var i=s.minImgHeight?("min-height:"+s.minImgHeight+";"):"";u+='<a class="slider-img-item"'+w+">";u+='<img src="'+x.url+'" style="'+v+i+'">';if(x.title){u+='<p class="mui-slider-title">'+x.title+"</p>"}u+="</a>";u+="</div>";return u};var j=function(B,w){var y="";if(w){y+='<div class="mui-slider-item mui-slider-item-duplicate" >'}else{y+='<div class="mui-slider-item">'}y+='<ul class="mui-table-view mui-grid-view">';var A=B.length;var u="mui-col-xs-"+12/s.perLineItem;for(var x=0;x<A;x++){var z=B[x].id?("id="+B[x].id):"";var v=s.maxImgHeight?("max-height:"+s.maxImgHeight+";"):"";var t=s.minImgHeight?("min-height:"+s.minImgHeight+";"):"";y+=' <li class="mui-table-view-cell mui-media slider-img-item '+u+'" '+z+">";y+="<a> ";y+='<img class="mui-media-object" src="'+B[x].url+'" style="'+v+t+'">';if(B[x].title){y+='<div class="mui-media-body">'+B[x].title+"</div>"}y+="</a>";y+="</li>"}y+="</ul>";y+="</div>";return y};if(s.isLoop){var l=h-1;if(Array.isArray(g[(l)])){o+=j(g[(l)],true)}else{o+=p(g[(l)],true)}}for(var m=0;m<h;m++){if(Array.isArray(g[(m)])){o+=j(g[(m)],false)}else{o+=p(g[(m)],false)}}if(s.isLoop){var l=0;if(Array.isArray(g[(l)])){o+=j(g[(l)],true)}else{o+=p(g[(l)],true)}}o+="</div>";if(s.isShowIndicator){o+='<div class="mui-slider-indicator">';for(var m=0;m<h;m++){if(m==0){o+='<div class="mui-indicator mui-active"></div>'}else{o+='<div class = "mui-indicator"></div>'}}o+="</div>"}if(s.isShowPageIndicator){o+='<div class="mui-slider-indicator">';o+='<span class="mui-action mui-action-previous mui-icon mui-icon-back"></span>';o+='<div class="mui-number">';o+='<span id="curr-gallery-index">1</span> / <span id="gallery-length">'+h+"</span>";o+="</div>";o+='<span class="mui-action mui-action-next mui-icon mui-icon-forward"></span>';o+="</div>"}o+="</div>";n.innerHTML="";b.appendHtmlChildCustom(n,o);var r=mui(n);var k=0;if(s.isAuto){k=s.autoTime}r.slider({interval:k});mui(n).on("tap",".slider-img-item",function(i){var t=this.getAttribute("id");i.preventDefault();q&&q(i,t);return false});if(s.isShowIndicator){mui(n).on("tap",".mui-slider-indicator .mui-indicator",function(t){var i=[].indexOf.call(this.parentNode.childNodes,this);r.slider().gotoItem(i);t.preventDefault();return false})}if(s.isShowPageIndicator){mui(n).on("tap",".mui-slider-indicator .mui-action-previous",function(i){r.slider().prevItem();i.preventDefault();return false});mui(n).on("tap",".mui-slider-indicator .mui-action-next",function(i){r.slider().nextItem();i.preventDefault();return false})}return r};return f}(a.GalleryFactory={}))});