define(function(require,exports,module){"use strict";function e(e,t,i,n){return!window.FileReader&&e&&e instanceof FileReader?void console.error("错误:FileReader不存在!"):(e.onload=function(e){i&&i(e.target.result)},"DataUrl"===n?e.readAsDataURL(t):"Text"===n?e.readAsText(t):e.readAsBinaryString(t),e)}function t(t,i,n){"string"==typeof t&&(t=document.querySelector(t)),t&&t instanceof HTMLElement||console.error("错误:input file标签的dom为空！或者不为Html元素!"),n=n||{},t.setAttribute("type","file"),n.isMulti?t.setAttribute("multiple","multiple"):t.removeAttribute("multiple");var o,l="File";"Image"===n.type?(o="image/*",l="DataUrl"):"Text"===n.type?(o="text/*",l="Text"):(o="*",l="File"),o=n.filter||o,t.setAttribute("accept",o);var r=function(){var n=t.files,o=n.length;if(0!==o){var r=new window.FileReader,c=0,u=function(){c>=o||e(r,n[c],function(e){i&&i(e,n[c]),c++,u()},l)};u()}};t.removeEventListener("change",r),t.addEventListener("change",r)}var i=require("CommonTools_Core");exports.delFile=function(e,t,n){e&&i.plusReady(function(){plus.io.resolveLocalFileSystemURL(e,function(e){e.remove(function(e){t&&"function"==typeof t&&t(!0)},function(e){n&&"function"==typeof n&&n("删除文件失败!")})},function(){n&&"function"==typeof n&&n("打开文件路径失败!")})})},exports.setSelectImgsFromDisks=function(e,i,n){t(e,i,{isMulti:n.isMulti||!1,filter:n.filter||"image/*",type:"Image"})},exports.setSelectFilesFromDisks=function(e,i,n){t(e,i,{isMulti:n.isMulti||!1,filter:n.filter||"*",type:"File"})},exports.setSelectTextsFromDisks=function(e,i,n){t(e,i,{isMulti:n.isMulti||!1,filter:n.filter||"text/*",type:"Text"})},exports.downloadLocalFile=function(e,t){var i=document.createElement("a"),n=new Blob([t]),o=document.createEvent("HTMLEvents");o.initEvent("click",!1,!1),i.download=e,i.href=URL.createObjectURL(n),i.dispatchEvent(o)}});