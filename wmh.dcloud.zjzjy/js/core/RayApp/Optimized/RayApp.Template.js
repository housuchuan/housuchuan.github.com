define(function(require,exports,module){"use strict";function e(e){i.importFile(["js/libs/mui.min.js"],function(){e&&(l=plus.webview.currentWebview(),o=new plus.nativeObj.Bitmap("RayAppTemplateBitmap")),t()})}function t(){var e=mui.back;mui.back=function(){l?(l.hide("auto"),setTimeout(function(){d.className="mui-title mui-fadeout",d.innerText="",null==a&&(a=l.children()[0]),a.hide("none")},350)):e()},window.addEventListener("triggerTemplateEvent",function(e){var t=e.detail.refreshEventName,i=e.detail.extras,n=e.detail.id;a&&a.pageId===n&&mui.fire(a,t,i)}),window.addEventListener("updateHeader",function(e){var t=e.detail.templateOptions||{},u=t.title||"",r=e.detail.id,s=e.detail.extras||{},m=e.detail.target,c=e.detail.aniShow||"none",f=e.detail.duration||150;d.innerHTML=u,d.className="mui-title mui-fadein",null==a&&(a=l.children()[0]);var p=(a.getURL(),!0),h=!1,v="";for(var w in s)v+=v.indexOf("?")==-1&&m.indexOf("?")==-1?"?":"&",v+=w+"="+encodeURIComponent(s[w]);m.lastIndexOf("/html/")===-1||/^(http|https|ftp)/g.test(m)||(m=m.substr(m.lastIndexOf("/html/")+1,m.length),m=i.getRealativePath(m)),m+=v,a.pageId!==r?(a.pageId=r,p=!1,n.clearChildrenWebviews(a),a.loadURL(m),a.draw(o,function(){p=!0},function(){p=!1}),h=!0):(n.firePageEvent(a,"loadUrlReady",{extras:s}),h=!1),setTimeout(function(){var e={acceleration:"auto"};o&&p&&(e.capture=o,e.otherCapture=o),l.show(c,f,function(){!h&&a.show("auto"),setTimeout(function(){h&&!a.isVisible()&&a.show("fade-in",200)},300)},e)},10)})}var i=require("CommonTools_Core"),n=require("WindowTools_Core"),a=null,l=null,o=null,d=document.getElementById("title");i.initReady(e)});